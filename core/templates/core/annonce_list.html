{% extends "core/base.html" %}

{% block content %}
<form method="get">
  <!-- Location Search -->
  <input
    type="text"
    name="location"
    placeholder="City, neighborhood..."
    value="{{ request.GET.location }}"
  >

  <!-- Price Range -->
  <input
    type="number"
    name="min_price"
    placeholder="Min price"
    value="{{ request.GET.min_price }}"
  >
  <input
    type="number"
    name="max_price"
    placeholder="Max price"
    value="{{ request.GET.max_price }}"
  >

  <button type="submit">Search</button>
</form>

<!-- Liste des annonces -->
<div class="row">
  {% for annonce in annonces %}
    <div class="col-md-4 mb-4">
      <div class="card">
        {% if annonce.image %}
          <img src="{{ annonce.image.url }}" class="card-img-top" alt="{{ annonce.titre }}">
        {% endif %}
        <div class="card-body">
          <h5 class="card-title">{{ annonce.titre }}</h5>
          <p class="text-muted">
            <i class="fas fa-map-marker-alt"></i> {{ annonce.localisation }}
          </p>
          <p class="card-text">{{ annonce.description|truncatechars:100 }}</p>
          <a href="{% url 'annonce_detail' annonce.id %}" class="btn btn-sm btn-outline-primary">
            Voir détails
          </a>
        </div>
      </div>
    </div>
  {% empty %}
    <div class="col-12">
      <div class="alert alert-info">
        Aucune annonce trouvée pour "{{ request.GET.localisation }}".
      </div>
    </div>
  {% endfor %}
</div>

{% endblock %}

